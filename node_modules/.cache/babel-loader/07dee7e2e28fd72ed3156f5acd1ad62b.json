{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pypho\\\\Desktop\\\\hogProject\\\\src\\\\auth\\\\JwtContext.js\",\n  _s = $RefreshSig$();\nimport PropTypes from 'prop-types';\nimport { createContext, useEffect, useReducer, useCallback } from 'react';\n// utils\nimport axios from '../utils/axios';\n//\nimport { isValidToken, setSession } from './utils';\n\n// ----------------------------------------------------------------------\n\n// NOTE:\n// We only build demo at basic level.\n// Customer will need to do some extra handling yourself if you want to extend the logic and other features...\n\n// ----------------------------------------------------------------------\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  isInitialized: false,\n  isAuthenticated: false,\n  user: null\n};\nconst reducer = (state, action) => {\n  if (action.type === 'INITIAL') {\n    return {\n      isInitialized: true,\n      isAuthenticated: action.payload.isAuthenticated,\n      user: action.payload.user\n    };\n  }\n  if (action.type === 'LOGIN') {\n    return {\n      ...state,\n      isAuthenticated: true,\n      user: action.payload.user\n    };\n  }\n  if (action.type === 'REGISTER') {\n    return {\n      ...state,\n      isAuthenticated: true,\n      user: action.payload.user\n    };\n  }\n  if (action.type === 'LOGOUT') {\n    return {\n      ...state,\n      isAuthenticated: false,\n      user: null\n    };\n  }\n  return state;\n};\n\n// ----------------------------------------------------------------------\n\nexport const AuthContext = /*#__PURE__*/createContext(null);\n\n// ----------------------------------------------------------------------\n\nAuthProvider.propTypes = {\n  children: PropTypes.node\n};\nexport function AuthProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const initialize = useCallback(async () => {\n    try {\n      const accessToken = typeof window !== 'undefined' ? localStorage.getItem('accessToken') : '';\n      if (accessToken && isValidToken(accessToken)) {\n        setSession(accessToken);\n        const response = await axios.get('/api/account/my-account');\n        const {\n          user\n        } = response.data;\n        dispatch({\n          type: 'INITIAL',\n          payload: {\n            isAuthenticated: true,\n            user\n          }\n        });\n      } else {\n        dispatch({\n          type: 'INITIAL',\n          payload: {\n            isAuthenticated: false,\n            user: null\n          }\n        });\n      }\n    } catch (error) {\n      console.error(error);\n      dispatch({\n        type: 'INITIAL',\n        payload: {\n          isAuthenticated: false,\n          user: null\n        }\n      });\n    }\n  }, []);\n  useEffect(() => {\n    initialize();\n  }, [initialize]);\n\n  // LOGIN\n  const login = async (email, password) => {\n    const response = await axios.post('/api/account/login', {\n      email,\n      password\n    });\n    const {\n      accessToken,\n      user\n    } = response.data;\n    setSession(accessToken);\n    dispatch({\n      type: 'LOGIN',\n      payload: {\n        user\n      }\n    });\n  };\n\n  // REGISTER\n  const register = async (email, password, firstName, lastName) => {\n    const response = await axios.post('/api/account/register', {\n      email,\n      password,\n      firstName,\n      lastName\n    });\n    const {\n      accessToken,\n      user\n    } = response.data;\n    localStorage.setItem('accessToken', accessToken);\n    dispatch({\n      type: 'REGISTER',\n      payload: {\n        user\n      }\n    });\n  };\n\n  // LOGOUT\n  const logout = async () => {\n    setSession(null);\n    dispatch({\n      type: 'LOGOUT'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      ...state,\n      method: 'jwt',\n      login,\n      logout,\n      register\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthProvider, \"rZTZGYhTivwo786rUN73/JAmys8=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["PropTypes","createContext","useEffect","useReducer","useCallback","axios","isValidToken","setSession","initialState","isInitialized","isAuthenticated","user","reducer","state","action","type","payload","AuthContext","AuthProvider","propTypes","children","node","dispatch","initialize","accessToken","window","localStorage","getItem","response","get","data","error","console","login","email","password","post","register","firstName","lastName","setItem","logout","method"],"sources":["C:/Users/pypho/Desktop/hogProject/src/auth/JwtContext.js"],"sourcesContent":["import PropTypes from 'prop-types';\r\nimport { createContext, useEffect, useReducer, useCallback } from 'react';\r\n// utils\r\nimport axios from '../utils/axios';\r\n//\r\nimport { isValidToken, setSession } from './utils';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\n// NOTE:\r\n// We only build demo at basic level.\r\n// Customer will need to do some extra handling yourself if you want to extend the logic and other features...\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst initialState = {\r\n  isInitialized: false,\r\n  isAuthenticated: false,\r\n  user: null,\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === 'INITIAL') {\r\n    return {\r\n      isInitialized: true,\r\n      isAuthenticated: action.payload.isAuthenticated,\r\n      user: action.payload.user,\r\n    };\r\n  }\r\n  if (action.type === 'LOGIN') {\r\n    return {\r\n      ...state,\r\n      isAuthenticated: true,\r\n      user: action.payload.user,\r\n    };\r\n  }\r\n  if (action.type === 'REGISTER') {\r\n    return {\r\n      ...state,\r\n      isAuthenticated: true,\r\n      user: action.payload.user,\r\n    };\r\n  }\r\n  if (action.type === 'LOGOUT') {\r\n    return {\r\n      ...state,\r\n      isAuthenticated: false,\r\n      user: null,\r\n    };\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport const AuthContext = createContext(null);\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nAuthProvider.propTypes = {\r\n  children: PropTypes.node,\r\n};\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  const initialize = useCallback(async () => {\r\n    try {\r\n      const accessToken = typeof window !== 'undefined' ? localStorage.getItem('accessToken') : '';\r\n\r\n      if (accessToken && isValidToken(accessToken)) {\r\n        setSession(accessToken);\r\n\r\n        const response = await axios.get('/api/account/my-account');\r\n\r\n        const { user } = response.data;\r\n\r\n        dispatch({\r\n          type: 'INITIAL',\r\n          payload: {\r\n            isAuthenticated: true,\r\n            user,\r\n          },\r\n        });\r\n      } else {\r\n        dispatch({\r\n          type: 'INITIAL',\r\n          payload: {\r\n            isAuthenticated: false,\r\n            user: null,\r\n          },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      dispatch({\r\n        type: 'INITIAL',\r\n        payload: {\r\n          isAuthenticated: false,\r\n          user: null,\r\n        },\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    initialize();\r\n  }, [initialize]);\r\n\r\n  // LOGIN\r\n  const login = async (email, password) => {\r\n    const response = await axios.post('/api/account/login', {\r\n      email,\r\n      password,\r\n    });\r\n    const { accessToken, user } = response.data;\r\n\r\n    setSession(accessToken);\r\n\r\n    dispatch({\r\n      type: 'LOGIN',\r\n      payload: {\r\n        user,\r\n      },\r\n    });\r\n  };\r\n\r\n  // REGISTER\r\n  const register = async (email, password, firstName, lastName) => {\r\n    const response = await axios.post('/api/account/register', {\r\n      email,\r\n      password,\r\n      firstName,\r\n      lastName,\r\n    });\r\n    const { accessToken, user } = response.data;\r\n\r\n    localStorage.setItem('accessToken', accessToken);\r\n\r\n    dispatch({\r\n      type: 'REGISTER',\r\n      payload: {\r\n        user,\r\n      },\r\n    });\r\n  };\r\n\r\n  // LOGOUT\r\n  const logout = async () => {\r\n    setSession(null);\r\n    dispatch({\r\n      type: 'LOGOUT',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        ...state,\r\n        method: 'jwt',\r\n        login,\r\n        logout,\r\n        register,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}